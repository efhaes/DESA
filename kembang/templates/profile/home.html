{% load static %}
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <title>Beranda Desa Kita</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/home.css' %}">

    <!-- Fonts & AOS -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />

    <!-- Icon (optional) -->
    <link rel="icon" href="{% static 'img/logo.png' %}" type="image/png">
</head>
<body>

<!-- Navbar -->

<nav>
  <div class="brand">ğŸŒ¾ Desa Cidokom</div>
  <div class="nav-links">
    <a href="{% url 'home' %}">Home</a>
    <a href="{% url 'tentang' %}">Tentang</a>
    <a href="{% url 'announcement_list' %}">Pengumuman</a>
    
    
    <a href="{% url 'persyaratan' %}">Persyaratan</a>
    {% if user.is_authenticated %}
      <span>ğŸ‘¤ {{ user.userprofile.nama }}</span>
      <a href="{% url 'logout' %}">Logout</a>
    {% else %}
      <a href="{% url 'login' %}">Login</a>
    {% endif %}
  </div>
  <div class="burger" aria-label="Menu navigasi" aria-expanded="false" role="button" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </div>
</nav>



<!-- Hero -->
<section class="hero" data-aos="fade-up">
    <h1>Selamat Datang di Website Pelayanan Desa Cidokom</h1>
    <p>Pelayanan lebih cepat, mudah, dan transparan untuk seluruh masyarakat desa.</p>
    <small>Digitalisasi Layanan Publik Menuju Desa Cidokom Cerdas</small>
</section>


<!-- Berita -->
    <section class="info" data-aos="fade-up">
    <h2>ğŸ“° Berita & Pengumuman</h2>
    <ul>
        {% for a in announcements %}
        <li>
            ğŸ“Œ <a href="{% url 'announcement_detail' a.pk %}">{{ a.title }}</a> - 
            <small>{{ a.published_at|date:"d M Y" }}</small>

            {% if a.image %}
            <div style="margin-top: 0.5rem;">
                <img src="{{ a.image.url }}" alt="Gambar {{ a.title }}" style="max-width:150px; border-radius:6px;"/>
            </div>
            {% endif %}
            
            <p>{{ a.content|truncatechars:100 }}</p>
        </li>
        {% empty %}
        <li>Belum ada pengumuman.</li>
        {% endfor %}
    </ul>
    </section>  




<!-- Kartu Pengajuan -->
<div class="cards-container">
    <div class="card" data-aos="fade-up" data-aos-delay="0">
        <h2>ğŸ‘¶ Akta Kelahiran</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_akta_kelahiran' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>

    <div class="card" data-aos="fade-up" data-aos-delay="100">
        <h2>ğŸšš Pindah Datang</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_pindah_datang' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>

    <div class="card" data-aos="fade-up" data-aos-delay="200">
        <h2>ğŸ  Pindah Keluar</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_pindah_keluar' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>

    <div class="card" data-aos="fade-up" data-aos-delay="300">
        <h2>âš°ï¸ Akta Kematian</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_akta_kematian' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>

    <div class="card" data-aos="fade-up" data-aos-delay="400">
        <h2>ğŸ’¸ SKTM</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_sktm' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>

    <div class="card" data-aos="fade-up" data-aos-delay="500">
        <h2>ğŸ“ Domisili</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_domisili' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>

    <div class="card" data-aos="fade-up" data-aos-delay="600">
        <h2>ğŸª SKU</h2>
        {% if user.is_authenticated %}
            <a href="{% url 'pengajuan_sku' %}">Ajukan Sekarang</a>
        {% else %}
            <button disabled>Ajukan Sekarang</button>
            <div class="login-msg">Harap login terlebih dahulu</div>
        {% endif %}
    </div>
</div>

<!-- Footer -->
<footer data-aos="fade-up">
    <p>Â© 2025 Desa Kita. Dibuat dengan â¤ï¸ oleh Pemuda Desa.</p>
</footer>

<!-- Script AOS -->
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init({
        duration: 800,
        once: true,
    });
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const nav = document.querySelector('nav');
  const burger = document.querySelector('.burger');

  burger.addEventListener('click', (e) => {
    e.stopPropagation();
    nav.classList.toggle('active');
    // toggle aria-expanded for accessibility
    const expanded = burger.getAttribute('aria-expanded') === 'true';
    burger.setAttribute('aria-expanded', String(!expanded));
  });

  // Klik di luar nav, close menu
  document.addEventListener('click', () => {
    if(nav.classList.contains('active')){
      nav.classList.remove('active');
      burger.setAttribute('aria-expanded', 'false');
    }
  });

  // Jangan close menu kalau klik di dalam nav
  nav.addEventListener('click', e => e.stopPropagation());

  // Close menu saat scroll
  window.addEventListener('scroll', () => {
    if(nav.classList.contains('active')){
      nav.classList.remove('active');
      burger.setAttribute('aria-expanded', 'false');
    }
  });
});
</script>

</body>
</html>
